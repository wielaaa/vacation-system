import streamlit as st
import pandas as pd
import hashlib
import json
from datetime import datetime, timedelta
import os
import plotly.express as px

# ุฅุนุฏุงุฏุงุช ุงูุตูุญุฉ
st.set_page_config(
    page_title="ูุธุงู ุฅุฏุงุฑุฉ ุงูุฅุฌุงุฒุงุช - ุงููุทุงุฑ",
    page_icon="โ๏ธ",
    layout="wide",
    initial_sidebar_state="expanded"
)

# CSS ูุฎุตุต ููุนุฑุจูุฉ
st.markdown("""
<style>
    .main .block-container {
        direction: rtl;
        text-align: right;
    }
    .stButton button {
        width: 100%;
    }
    .success-msg {
        background-color: #d4edda;
        color: #155724;
        padding: 10px;
        border-radius: 5px;
        margin: 10px 0;
    }
    .error-msg {
        background-color: #f8d7da;
        color: #721c24;
        padding: 10px;
        border-radius: 5px;
        margin: 10px 0;
    }
    .info-box {
        background-color: #d1ecf1;
        border: 1px solid #bee5eb;
        border-radius: 5px;
        padding: 15px;
        margin: 10px 0;
    }
</style>
""", unsafe_allow_html=True)

# ูุธุงุฆู ูุธุงู ุงููููุงุช
def ุชุดููุฑ_ูููุฉ_ุงููุฑูุฑ(ูููุฉ_ุงููุฑูุฑ):
    return hashlib.sha256(ูููุฉ_ุงููุฑูุฑ.encode()).hexdigest()

def ุชุญููู_ุงูุจูุงูุงุช(ุงุณู_ุงูููู, ุจูุงูุงุช_ุงูุชุฑุงุถูุฉ=None):
    """ุชุญููู ุงูุจูุงูุงุช ูู ููู CSV"""
    try:
        return pd.read_csv(ุงุณู_ุงูููู)
    except:
        if ุจูุงูุงุช_ุงูุชุฑุงุถูุฉ is not None:
            return ุจูุงูุงุช_ุงูุชุฑุงุถูุฉ
        return pd.DataFrame()

def ุญูุธ_ุงูุจูุงูุงุช(ุงุณู_ุงูููู, ุงูุจูุงูุงุช):
    """ุญูุธ ุงูุจูุงูุงุช ูู ููู CSV"""
    ุงูุจูุงูุงุช.to_csv(ุงุณู_ุงูููู, index=False)

def ุชููุฆุฉ_ุงููุธุงู():
    """ุชููุฆุฉ ุงูุจูุงูุงุช ุงูุฃูููุฉ ูููุธุงู"""
    
    # ุจูุงูุงุช ุงููุณุชุฎุฏููู ุงูุงูุชุฑุงุถูุฉ
    ุจูุงูุงุช_ุงููุณุชุฎุฏููู = pd.DataFrame([{
        'ูุนุฑู': 1,
        'ุงุณู_ุงููุณุชุฎุฏู': '5485',
        'ูููุฉ_ุงููุฑูุฑ': ุชุดููุฑ_ูููุฉ_ุงููุฑูุฑ('4856739'),
        'ุงุณู_ุงูููุธู': 'ุงููุณุคูู ุงูุนุงู',
        'ููุน_ุงููุณุชุฎุฏู': 'ูุฏูุฑ_ุงููุธุงู',
        'ุงููุณู': 'ุงูุฅุฏุงุฑุฉ ุงูุนุงูุฉ',
        'ุงูุญุงูุฉ': 'ูุดุท',
        'ุชุงุฑูุฎ_ุงูุฅูุดุงุก': datetime.now().strftime('%Y-%m-%d %H:%M:%S')
    }])
    
    # ุฃููุงุน ุงูุฅุฌุงุฒุงุช
    ุฃููุงุน_ุงูุฅุฌุงุฒุงุช = pd.DataFrame([
        {'ูุนุฑู': 1, 'ุงุณู_ุงูุฅุฌุงุฒุฉ': 'ุฅุฌุงุฒุฉ ุงุนุชูุงุฏูุฉ', 'ุงููุตู': 'ุงูุฅุฌุงุฒุฉ ุงูุงุนุชูุงุฏูุฉ ุงูุณูููุฉ', 'ุงูุญุงูุฉ': 'ููุนู'},
        {'ูุนุฑู': 2, 'ุงุณู_ุงูุฅุฌุงุฒุฉ': 'ุฅุฌุงุฒุฉ ุนุฑุถุฉ', 'ุงููุตู': 'ุฅุฌุงุฒุฉ ุงูุนุฑุถุฉ', 'ุงูุญุงูุฉ': 'ููุนู'},
        {'ูุนุฑู': 3, 'ุงุณู_ุงูุฅุฌุงุฒุฉ': 'ุฅุฌุงุฒุฉ ุจุฏู ุฑุงุญุฉ', 'ุงููุตู': 'ุจุฏู ุงูุฑุงุญุฉ', 'ุงูุญุงูุฉ': 'ููุนู'},
        {'ูุนุฑู': 4, 'ุงุณู_ุงูุฅุฌุงุฒุฉ': 'ุฅุฌุงุฒุฉ ุจุฏู ุนูู', 'ุงููุตู': 'ุจุฏู ุงูุนูู', 'ุงูุญุงูุฉ': 'ููุนู'},
        {'ูุนุฑู': 5, 'ุงุณู_ุงูุฅุฌุงุฒุฉ': 'ุฅุฌุงุฒุฉ ุจุฏูู ูุฑุชุจ', 'ุงููุตู': 'ุฅุฌุงุฒุฉ ุจุฏูู ูุฑุชุจ', 'ุงูุญุงูุฉ': 'ููุนู'},
        {'ูุนุฑู': 6, 'ุงุณู_ุงูุฅุฌุงุฒุฉ': 'ุฅุฌุงุฒุฉ ูุฑุถูุฉ', 'ุงููุตู': 'ุงูุฅุฌุงุฒุฉ ุงููุฑุถูุฉ', 'ุงูุญุงูุฉ': 'ููุนู'},
        {'ูุนุฑู': 7, 'ุงุณู_ุงูุฅุฌุงุฒุฉ': 'ุฅุฌุงุฒุฉ ุทุงุฑุฆุฉ', 'ุงููุตู': 'ุงูุฅุฌุงุฒุฉ ุงูุทุงุฑุฆุฉ', 'ุงูุญุงูุฉ': 'ููุนู'},
        {'ูุนุฑู': 8, 'ุงุณู_ุงูุฅุฌุงุฒุฉ': 'ุฅุฌุงุฒุฉ ุฏุฑุงุณูุฉ', 'ุงููุตู': 'ุงูุฅุฌุงุฒุฉ ุงูุฏุฑุงุณูุฉ', 'ุงูุญุงูุฉ': 'ููุนู'},
        {'ูุนุฑู': 9, 'ุงุณู_ุงูุฅุฌุงุฒุฉ': 'ุฅุฌุงุฒุฉ ุญุฌ / ุนูุฑุฉ', 'ุงููุตู': 'ุฅุฌุงุฒุฉ ุงูุญุฌ ุฃู ุงูุนูุฑุฉ', 'ุงูุญุงูุฉ': 'ููุนู'},
        {'ูุนุฑู': 10, 'ุงุณู_ุงูุฅุฌุงุฒุฉ': 'ุฅุฌุงุฒุฉ ูุฑุงููุฉ ูุฑูุถ', 'ุงููุตู': 'ุฅุฌุงุฒุฉ ูุฑุงููุฉ ุงููุฑูุถ', 'ุงูุญุงูุฉ': 'ููุนู'}
    ])
    
    # ุฃุฑุตุฏุฉ ุงูุฅุฌุงุฒุงุช
    ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช = pd.DataFrame([{
        'ูุนุฑู': 1,
        'ูุนุฑู_ุงูููุธู': 1,
        'ุฑุตูุฏ_ุงูุณูุฉ_ุงูุญุงููุฉ': 30,
        'ุฑุตูุฏ_ุงูุนุงู_ุงูุณุงุจู_1': 15,
        'ุฑุตูุฏ_ุงูุนุงู_ุงูุณุงุจู_2': 10,
        'ุงูุณูุฉ': 2024,
        'ุชุงุฑูุฎ_ุงูุชุญุฏูุซ': datetime.now().strftime('%Y-%m-%d %H:%M:%S')
    }])
    
    # ุญูุธ ุงูุจูุงูุงุช
    ุญูุธ_ุงูุจูุงูุงุช('ุงููุณุชุฎุฏููู.csv', ุจูุงูุงุช_ุงููุณุชุฎุฏููู)
    ุญูุธ_ุงูุจูุงูุงุช('ุฃููุงุน_ุงูุฅุฌุงุฒุงุช.csv', ุฃููุงุน_ุงูุฅุฌุงุฒุงุช)
    ุญูุธ_ุงูุจูุงูุงุช('ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช.csv', ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช)
    ุญูุธ_ุงูุจูุงูุงุช('ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ.csv', pd.DataFrame())
    ุญูุธ_ุงูุจูุงูุงุช('ุงูุฅุดุนุงุฑุงุช.csv', pd.DataFrame())

# ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
def ุตูุญุฉ_ุชุณุฌูู_ุงูุฏุฎูู():
    st.markdown("<h1 style='text-align: center; color: #1f77b4;'>โ๏ธ ูุธุงู ุฅุฏุงุฑุฉ ุงูุฅุฌุงุฒุงุช - ุงููุทุงุฑ</h1>", unsafe_allow_html=True)
    
    col1, col2, col3 = st.columns([1, 2, 1])
    
    with col2:
        with st.form("ุชุณุฌูู_ุงูุฏุฎูู"):
            st.subheader("ุชุณุฌูู ุงูุฏุฎูู")
            ุงุณู_ุงููุณุชุฎุฏู = st.text_input("ุงุณู ุงููุณุชุฎุฏู")
            ูููุฉ_ุงููุฑูุฑ = st.text_input("ูููุฉ ุงููุฑูุฑ", type="password")
            ุฒุฑ_ุงูุฏุฎูู = st.form_submit_button("๐ ุฏุฎูู ุฅูู ุงููุธุงู")
            
            if ุฒุฑ_ุงูุฏุฎูู:
                if ุงุณู_ุงููุณุชุฎุฏู and ูููุฉ_ุงููุฑูุฑ:
                    ุงููุณุชุฎุฏููู = ุชุญููู_ุงูุจูุงูุงุช('ุงููุณุชุฎุฏููู.csv')
                    
                    if not ุงููุณุชุฎุฏููู.empty:
                        ูุณุชุฎุฏู = ุงููุณุชุฎุฏููู[
                            (ุงููุณุชุฎุฏููู['ุงุณู_ุงููุณุชุฎุฏู'] == ุงุณู_ุงููุณุชุฎุฏู) & 
                            (ุงููุณุชุฎุฏููู['ูููุฉ_ุงููุฑูุฑ'] == ุชุดููุฑ_ูููุฉ_ุงููุฑูุฑ(ูููุฉ_ุงููุฑูุฑ)) &
                            (ุงููุณุชุฎุฏููู['ุงูุญุงูุฉ'] == 'ูุดุท')
                        ]
                        
                        if not ูุณุชุฎุฏู.empty:
                            ูุณุชุฎุฏู = ูุณุชุฎุฏู.iloc[0]
                            st.session_state.ูุนุฑู_ุงููุณุชุฎุฏู = ูุณุชุฎุฏู['ูุนุฑู']
                            st.session_state.ุงุณู_ุงููุณุชุฎุฏู = ูุณุชุฎุฏู['ุงุณู_ุงููุณุชุฎุฏู']
                            st.session_state.ุงุณู_ุงูููุธู = ูุณุชุฎุฏู['ุงุณู_ุงูููุธู']
                            st.session_state.ููุน_ุงููุณุชุฎุฏู = ูุณุชุฎุฏู['ููุน_ุงููุณุชุฎุฏู']
                            st.session_state.ุงููุณู = ูุณุชุฎุฏู['ุงููุณู']
                            st.success(f"โ ูุฑุญุจุงู {ูุณุชุฎุฏู['ุงุณู_ุงูููุธู']}!")
                            time.sleep(1)
                            st.rerun()
                        else:
                            st.error("โ ุงุณู ุงููุณุชุฎุฏู ุฃู ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ")
                    else:
                        st.error("โ ูุง ููุฌุฏ ูุณุชุฎุฏููู ูู ุงููุธุงู")
                else:
                    st.error("โ ูุฑุฌู ุฅุฏุฎุงู ุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑ")
        
        st.markdown("---")
        st.info("""
        **ุงููุณุชุฎุฏู ุงูุงูุชุฑุงุถู ููุงุฎุชุจุงุฑ:**
        - **ุงุณู ุงููุณุชุฎุฏู:** 5485
        - **ูููุฉ ุงููุฑูุฑ:** 4856739
        """)

# ููุญุฉ ุชุญูู ุงูููุธู
def ููุญุฉ_ุงูููุธู():
    st.sidebar.title(f"๐ค {st.session_state.ุงุณู_ุงูููุธู}")
    st.sidebar.markdown(f"**ุงููุณู:** {st.session_state.ุงููุณู}")
    
    ูุงุฆูุฉ_ุงูููุธู = ["ุงูุฑุฆูุณูุฉ", "ุทูุจ ุฅุฌุงุฒุฉ ุฌุฏูุฏุฉ", "ุทูุจุงุชู", "ุฑุตูุฏ ุงูุฅุฌุงุฒุงุช"]
    ุงุฎุชูุงุฑ = st.sidebar.selectbox("ุงููุงุฆูุฉ", ูุงุฆูุฉ_ุงูููุธู)
    
    if ุงุฎุชูุงุฑ == "ุงูุฑุฆูุณูุฉ":
        ุงูุฑุฆูุณูุฉ_ุงูููุธู()
    elif ุงุฎุชูุงุฑ == "ุทูุจ ุฅุฌุงุฒุฉ ุฌุฏูุฏุฉ":
        ุทูุจ_ุฅุฌุงุฒุฉ_ุฌุฏูุฏุฉ()
    elif ุงุฎุชูุงุฑ == "ุทูุจุงุชู":
        ุนุฑุถ_ุทูุจุงุชู()
    elif ุงุฎุชูุงุฑ == "ุฑุตูุฏ ุงูุฅุฌุงุฒุงุช":
        ุนุฑุถ_ุฑุตูุฏ_ุงูุฅุฌุงุฒุงุช()

def ุงูุฑุฆูุณูุฉ_ุงูููุธู():
    st.title("๐ ููุญุฉ ุชุญูู ุงูููุธู")
    
    # ุฅุญุตุงุฆูุงุช ุณุฑูุนุฉ
    col1, col2, col3, col4 = st.columns(4)
    
    # ุชุญููู ุงูุจูุงูุงุช
    ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ = ุชุญููู_ุงูุจูุงูุงุช('ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ.csv', pd.DataFrame())
    ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช = ุชุญููู_ุงูุจูุงูุงุช('ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช.csv', pd.DataFrame())
    
    if not ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ.empty:
        ุทูุจุงุช_ุงูููุธู = ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ[ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ['ูุนุฑู_ุงูููุธู'] == st.session_state.ูุนุฑู_ุงููุณุชุฎุฏู]
        ุนุฏุฏ_ุงูุทูุจุงุช = len(ุทูุจุงุช_ุงูููุธู)
        ุทูุจุงุช_ูุนููุฉ = len(ุทูุจุงุช_ุงูููุธู[ุทูุจุงุช_ุงูููุธู['ุงูุญุงูุฉ'] == 'ููุฏ ุงููุฑุงุฌุนุฉ'])
    else:
        ุนุฏุฏ_ุงูุทูุจุงุช = 0
        ุทูุจุงุช_ูุนููุฉ = 0
    
    if not ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช.empty:
        ุฑุตูุฏ_ุงูููุธู = ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช[ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช['ูุนุฑู_ุงูููุธู'] == st.session_state.ูุนุฑู_ุงููุณุชุฎุฏู]
        if not ุฑุตูุฏ_ุงูููุธู.empty:
            ุฑุตูุฏ_ุญุงูู = ุฑุตูุฏ_ุงูููุธู.iloc[0]['ุฑุตูุฏ_ุงูุณูุฉ_ุงูุญุงููุฉ']
        else:
            ุฑุตูุฏ_ุญุงูู = 0
    else:
        ุฑุตูุฏ_ุญุงูู = 0
    
    with col1:
        st.metric("ุฅุฌูุงูู ุงูุทูุจุงุช", ุนุฏุฏ_ุงูุทูุจุงุช)
    with col2:
        st.metric("ุทูุจุงุช ููุฏ ุงููุฑุงุฌุนุฉ", ุทูุจุงุช_ูุนููุฉ)
    with col3:
        st.metric("ุฑุตูุฏ ุงูุณูุฉ ุงูุญุงููุฉ", ุฑุตูุฏ_ุญุงูู)
    
    # ุขุฎุฑ ุงูุทูุจุงุช
    st.subheader("๐ ุขุฎุฑ ุทูุจุงุช ุงูุฅุฌุงุฒุฉ")
    
    if not ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ.empty:
        ุทูุจุงุช_ุงูููุธู = ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ[ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ['ูุนุฑู_ุงูููุธู'] == st.session_state.ูุนุฑู_ุงููุฎุฏู].tail(5)
        ุฃููุงุน_ุงูุฅุฌุงุฒุงุช = ุชุญููู_ุงูุจูุงูุงุช('ุฃููุงุน_ุงูุฅุฌุงุฒุงุช.csv')
        
        if not ุทูุจุงุช_ุงูููุธู.empty:
            ุจูุงูุงุช_ุงูุฌุฏูู = []
            for _, ุทูุจ in ุทูุจุงุช_ุงูููุธู.iterrows():
                ููุน_ุงูุฅุฌุงุฒุฉ = ุฃููุงุน_ุงูุฅุฌุงุฒุงุช[ุฃููุงุน_ุงูุฅุฌุงุฒุงุช['ูุนุฑู'] == ุทูุจ['ููุน_ุงูุฅุฌุงุฒุฉ']]
                ุงุณู_ุงูุฅุฌุงุฒุฉ = ููุน_ุงูุฅุฌุงุฒุฉ.iloc[0]['ุงุณู_ุงูุฅุฌุงุฒุฉ'] if not ููุน_ุงูุฅุฌุงุฒุฉ.empty else "ุบูุฑ ูุนุฑูู"
                
                ุจูุงูุงุช_ุงูุฌุฏูู.append({
                    "ููุน ุงูุฅุฌุงุฒุฉ": ุงุณู_ุงูุฅุฌุงุฒุฉ,
                    "ูู": ุทูุจ['ุชุงุฑูุฎ_ุงูุจุฏุก'],
                    "ุฅูู": ุทูุจ['ุชุงุฑูุฎ_ุงูุงูุชูุงุก'],
                    "ุนุฏุฏ ุงูุฃูุงู": ุทูุจ['ุนุฏุฏ_ุงูุฃูุงู'],
                    "ุงูุญุงูุฉ": ุทูุจ['ุงูุญุงูุฉ'],
                    "ุชุงุฑูุฎ ุงูุทูุจ": ุทูุจ['ุชุงุฑูุฎ_ุงูุทูุจ']
                })
            
            st.dataframe(ุจูุงูุงุช_ุงูุฌุฏูู, use_container_width=True)
        else:
            st.info("ูุง ุชูุฌุฏ ุทูุจุงุช ุฅุฌุงุฒุฉ ุญุชู ุงูุขู")
    else:
        st.info("ูุง ุชูุฌุฏ ุทูุจุงุช ุฅุฌุงุฒุฉ ุญุชู ุงูุขู")

def ุทูุจ_ุฅุฌุงุฒุฉ_ุฌุฏูุฏุฉ():
    st.title("๐ ุทูุจ ุฅุฌุงุฒุฉ ุฌุฏูุฏุฉ")
    
    # ุชุญููู ุงูุจูุงูุงุช
    ุฃููุงุน_ุงูุฅุฌุงุฒุงุช = ุชุญููู_ุงูุจูุงูุงุช('ุฃููุงุน_ุงูุฅุฌุงุฒุงุช.csv')
    ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช = ุชุญููู_ุงูุจูุงูุงุช('ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช.csv', pd.DataFrame())
    
    with st.form("ุทูุจ_ุฅุฌุงุฒุฉ"):
        col1, col2 = st.columns(2)
        
        with col1:
            if not ุฃููุงุน_ุงูุฅุฌุงุฒุงุช.empty:
                ููุน_ุงูุฅุฌุงุฒุฉ = st.selectbox(
                    "ููุน ุงูุฅุฌุงุฒุฉ",
                    options=ุฃููุงุน_ุงูุฅุฌุงุฒุงุช['ูุนุฑู'].tolist(),
                    format_func=lambda x: ุฃููุงุน_ุงูุฅุฌุงุฒุงุช[ุฃููุงุน_ุงูุฅุฌุงุฒุงุช['ูุนุฑู'] == x]['ุงุณู_ุงูุฅุฌุงุฒุฉ'].iloc[0]
                )
            ุชุงุฑูุฎ_ุงูุจุฏุก = st.date_input("ุชุงุฑูุฎ ุงูุจุฏุก", min_value=datetime.now().date())
            ุงูุณุจุจ = st.text_area("ุณุจุจ ุงูุฅุฌุงุฒุฉ")
        
        with col2:
            # ุนุฑุถ ูุนูููุงุช ุงูุฑุตูุฏ
            if not ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช.empty:
                ุฑุตูุฏ_ุงูููุธู = ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช[ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช['ูุนุฑู_ุงูููุธู'] == st.session_state.ูุนุฑู_ุงููุณุชุฎุฏู]
                if not ุฑุตูุฏ_ุงูููุธู.empty:
                    ุฑุตูุฏ = ุฑุตูุฏ_ุงูููุธู.iloc[0]
                    st.info(f"""
                    **ุฑุตูุฏ ุงูุฅุฌุงุฒุงุช ุงููุชุงุญ:**
                    - ุงูุณูุฉ ุงูุญุงููุฉ: {ุฑุตูุฏ['ุฑุตูุฏ_ุงูุณูุฉ_ุงูุญุงููุฉ']} ููู
                    - ุงูุนุงู ุงูุณุงุจู 1: {ุฑุตูุฏ['ุฑุตูุฏ_ุงูุนุงู_ุงูุณุงุจู_1']} ููู
                    - ุงูุนุงู ุงูุณุงุจู 2: {ุฑุตูุฏ['ุฑุตูุฏ_ุงูุนุงู_ุงูุณุงุจู_2']} ููู
                    """)
                else:
                    st.warning("ูุง ููุฌุฏ ุฑุตูุฏ ุฅุฌุงุฒุงุช ูุชุงุญ")
            else:
                st.warning("ูุง ููุฌุฏ ุฑุตูุฏ ุฅุฌุงุฒุงุช ูุชุงุญ")
            
            ุชุงุฑูุฎ_ุงูุงูุชูุงุก = st.date_input("ุชุงุฑูุฎ ุงูุงูุชูุงุก", min_value=datetime.now().date())
        
        if st.form_submit_button("ุชูุฏูู ุทูุจ ุงูุฅุฌุงุฒุฉ"):
            if ุชุงุฑูุฎ_ุงูุจุฏุก and ุชุงุฑูุฎ_ุงูุงูุชูุงุก:
                if ุชุงุฑูุฎ_ุงูุงูุชูุงุก >= ุชุงุฑูุฎ_ุงูุจุฏุก:
                    ุนุฏุฏ_ุงูุฃูุงู = (ุชุงุฑูุฎ_ุงูุงูุชูุงุก - ุชุงุฑูุฎ_ุงูุจุฏุก).days + 1
                    
                    # ุชุญููู ุงูุทูุจุงุช ุงูุญุงููุฉ
                    ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ = ุชุญููู_ุงูุจูุงูุงุช('ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ.csv', pd.DataFrame())
                    
                    # ุฅูุทูุจ ุฌุฏูุฏ
                    ุทูุจ_ุฌุฏูุฏ = {
                        'ูุนุฑู_ุงูููุธู': st.session_state.ูุนุฑู_ุงููุณุชุฎุฏู,
                        'ููุน_ุงูุฅุฌุงุฒุฉ': ููุน_ุงูุฅุฌุงุฒุฉ,
                        'ุชุงุฑูุฎ_ุงูุจุฏุก': ุชุงุฑูุฎ_ุงูุจุฏุก.strftime('%Y-%m-%d'),
                        'ุชุงุฑูุฎ_ุงูุงูุชูุงุก': ุชุงุฑูุฎ_ุงูุงูุชูุงุก.strftime('%Y-%m-%d'),
                        'ุนุฏุฏ_ุงูุฃูุงู': ุนุฏุฏ_ุงูุฃูุงู,
                        'ุงูุณุจุจ': ุงูุณุจุจ,
                        'ุงูุญุงูุฉ': 'ููุฏ ุงููุฑุงุฌุนุฉ',
                        'ููุงุญุธุงุช_ุงููุฏูุฑ': '',
                        'ูุนุฑู_ุงููุฏูุฑ_ุงูููุงูู': None,
                        'ุชุงุฑูุฎ_ุงูุทูุจ': datetime.now().strftime('%Y-%m-%d %H:%M:%S')
                    }
                    
                    # ุฅุถุงูุฉ ุงูุทูุจ ุงูุฌุฏูุฏ
                    if ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ.empty:
                        ุทูุจ_ุฌุฏูุฏ['ูุนุฑู'] = 1
                        ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ = pd.DataFrame([ุทูุจ_ุฌุฏูุฏ])
                    else:
                        ุทูุจ_ุฌุฏูุฏ['ูุนุฑู'] = ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ['ูุนุฑู'].max() + 1
                        ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ = pd.concat([ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ, pd.DataFrame([ุทูุจ_ุฌุฏูุฏ])], ignore_index=True)
                    
                    # ุญูุธ ุงูุจูุงูุงุช
                    ุญูุธ_ุงูุจูุงูุงุช('ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ.csv', ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ)
                    
                    st.success("โ ุชู ุชูุฏูู ุทูุจ ุงูุฅุฌุงุฒุฉ ุจูุฌุงุญ ูุณูุชู ูุฑุงุฌุนุชู ูุฑูุจุงู")
                else:
                    st.error("โ ุชุงุฑูุฎ ุงูุงูุชูุงุก ูุฌุจ ุฃู ูููู ุจุนุฏ ุชุงุฑูุฎ ุงูุจุฏุก")
            else:
                st.error("โ ูุฑุฌู ููุก ุฌููุน ุงูุญููู")

def ุนุฑุถ_ุทูุจุงุชู():
    st.title("๐ ุทูุจุงุช ุงูุฅุฌุงุฒุฉ ุงูุฎุงุตุฉ ุจู")
    
    ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ = ุชุญููู_ุงูุจูุงูุงุช('ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ.csv', pd.DataFrame())
    ุฃููุงุน_ุงูุฅุฌุงุฒุงุช = ุชุญููู_ุงูุจูุงูุงุช('ุฃููุงุน_ุงูุฅุฌุงุฒุงุช.csv')
    
    if not ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ.empty:
        ุทูุจุงุช_ุงูููุธู = ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ[ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ['ูุนุฑู_ุงูููุธู'] == st.session_state.ูุนุฑู_ุงููุณุชุฎุฏู]
        
        if not ุทูุจุงุช_ุงูููุธู.empty:
            for _, ุทูุจ in ุทูุจุงุช_ุงูููุธู.iterrows():
                ููุน_ุงูุฅุฌุงุฒุฉ = ุฃููุงุน_ุงูุฅุฌุงุฒุงุช[ุฃููุงุน_ุงูุฅุฌุงุฒุงุช['ูุนุฑู'] == ุทูุจ['ููุน_ุงูุฅุฌุงุฒุฉ']]
                ุงุณู_ุงูุฅุฌุงุฒุฉ = ููุน_ุงูุฅุฌุงุฒุฉ.iloc[0]['ุงุณู_ุงูุฅุฌุงุฒุฉ'] if not ููุน_ุงูุฅุฌุงุฒุฉ.empty else "ุบูุฑ ูุนุฑูู"
                
                with st.expander(f"{ุงุณู_ุงูุฅุฌุงุฒุฉ} - {ุทูุจ['ุชุงุฑูุฎ_ุงูุจุฏุก']} ุฅูู {ุทูุจ['ุชุงุฑูุฎ_ุงูุงูุชูุงุก']}"):
                    col1, col2, col3 = st.columns(3)
                    col1.metric("ุนุฏุฏ ุงูุฃูุงู", ุทูุจ['ุนุฏุฏ_ุงูุฃูุงู'])
                    col2.metric("ุงูุญุงูุฉ", ุทูุจ['ุงูุญุงูุฉ'])
                    col3.metric("ุชุงุฑูุฎ ุงูุทูุจ", ุทูุจ['ุชุงุฑูุฎ_ุงูุทูุจ'])
                    
                    if ุทูุจ['ุงูุณุจุจ']:
                        st.write(f"**ุงูุณุจุจ:** {ุทูุจ['ุงูุณุจุจ']}")
                    if ุทูุจ['ููุงุญุธุงุช_ุงููุฏูุฑ']:
                        st.write(f"**ููุงุญุธุงุช ุงููุฏูุฑ:** {ุทูุจ['ููุงุญุธุงุช_ุงููุฏูุฑ']}")
        else:
            st.info("ูุง ุชูุฌุฏ ุทูุจุงุช ุฅุฌุงุฒุฉ")
    else:
        st.info("ูุง ุชูุฌุฏ ุทูุจุงุช ุฅุฌุงุฒุฉ")

def ุนุฑุถ_ุฑุตูุฏ_ุงูุฅุฌุงุฒุงุช():
    st.title("๐ฐ ุฑุตูุฏ ุงูุฅุฌุงุฒุงุช")
    
    ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช = ุชุญููู_ุงูุจูุงูุงุช('ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช.csv', pd.DataFrame())
    
    if not ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช.empty:
        ุฃุฑุตุฏุฉ_ุงูููุธู = ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช[ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช['ูุนุฑู_ุงูููุธู'] == st.session_state.ูุนุฑู_ุงููุณุชุฎุฏู]
        
        if not ุฃุฑุตุฏุฉ_ุงูููุธู.empty:
            for _, ุฑุตูุฏ in ุฃุฑุตุฏุฉ_ุงูููุธู.iterrows():
                st.subheader(f"ุณูุฉ {ุฑุตูุฏ['ุงูุณูุฉ']}")
                
                col1, col2, col3 = st.columns(3)
                col1.metric("ุฑุตูุฏ ุงูุณูุฉ ุงูุญุงููุฉ", ุฑุตูุฏ['ุฑุตูุฏ_ุงูุณูุฉ_ุงูุญุงููุฉ'])
                col2.metric("ุฑุตูุฏ ุงูุนุงู ุงูุณุงุจู 1", ุฑุตูุฏ['ุฑุตูุฏ_ุงูุนุงู_ุงูุณุงุจู_1'])
                col3.metric("ุฑุตูุฏ ุงูุนุงู ุงูุณุงุจู 2", ุฑุตูุฏ['ุฑุตูุฏ_ุงูุนุงู_ุงูุณุงุจู_2'])
        else:
            st.warning("ูุง ููุฌุฏ ุฑุตูุฏ ุฅุฌุงุฒุงุช ูุณุฌู")
    else:
        st.warning("ูุง ููุฌุฏ ุฑุตูุฏ ุฅุฌุงุฒุงุช ูุณุฌู")

# ุงูุชุทุจูู ุงูุฑุฆูุณู
def main():
    # ุชููุฆุฉ ุงููุธุงู ุฅุฐุง ูุงู ุฃูู ุชุดุบูู
    if not os.path.exists('ุงููุณุชุฎุฏููู.csv'):
        ุชููุฆุฉ_ุงููุธุงู()
        st.success("โ ุชู ุชููุฆุฉ ุงููุธุงู ุจูุฌุงุญ!")
    
    # ุงูุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู
    if 'ูุนุฑู_ุงููุณุชุฎุฏู' not in st.session_state:
        ุตูุญุฉ_ุชุณุฌูู_ุงูุฏุฎูู()
    else:
        # ุฅุถุงูุฉ ุฒุฑ ุชุณุฌูู ุงูุฎุฑูุฌ ูู ุงูุณุงูุฏุจุงุฑ
        with st.sidebar:
            if st.button("๐ช ุชุณุฌูู ุงูุฎุฑูุฌ"):
                for key in list(st.session_state.keys()):
                    del st.session_state[key]
                st.rerun()
        
        # ุชูุฌูู ุญุณุจ ููุน ุงููุณุชุฎุฏู
        if st.session_state.ููุน_ุงููุณุชุฎุฏู == 'ููุธู':
            ููุญุฉ_ุงูููุธู()
        elif st.session_state.ููุน_ุงููุณุชุฎุฏู == 'ูุฏูุฑ_ุงููุธุงู':
            ููุญุฉ_ูุฏูุฑ_ุงููุธุงู()
        else:
            st.warning("ููุญุฉ ุงูุชุญูู ููุฏ ุงูุชุทููุฑ ูููุน ุงููุณุชุฎุฏู ูุฐุง")

# ููุญุฉ ูุฏูุฑ ุงููุธุงู (ูุจุณุทุฉ)
def ููุญุฉ_ูุฏูุฑ_ุงููุธุงู():
    st.sidebar.title(f"๐จโ๐ผ ูุฏูุฑ ุงููุธุงู - {st.session_state.ุงุณู_ุงูููุธู}")
    
    ูุงุฆูุฉ_ุงููุฏูุฑ = ["ุงูุฑุฆูุณูุฉ", "ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู", "ุงูุทูุจุงุช ุงููุนููุฉ"]
    ุงุฎุชูุงุฑ = st.sidebar.selectbox("ุงููุงุฆูุฉ", ูุงุฆูุฉ_ุงููุฏูุฑ)
    
    if ุงุฎุชูุงุฑ == "ุงูุฑุฆูุณูุฉ":
        ุงูุฑุฆูุณูุฉ_ูุฏูุฑ_ุงููุธุงู()
    elif ุงุฎุชูุงุฑ == "ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู":
        ุฅุฏุงุฑุฉ_ุงููุณุชุฎุฏููู()
    elif ุงุฎุชูุงุฑ == "ุงูุทูุจุงุช ุงููุนููุฉ":
        ุงูุทูุจุงุช_ุงููุนููุฉ()

def ุงูุฑุฆูุณูุฉ_ูุฏูุฑ_ุงููุธุงู():
    st.title("๐จโ๐ผ ููุญุฉ ุชุญูู ูุฏูุฑ ุงููุธุงู")
    
    # ุฅุญุตุงุฆูุงุช
    col1, col2, col3, col4 = st.columns(4)
    
    ุงููุณุชุฎุฏููู = ุชุญููู_ุงูุจูุงูุงุช('ุงููุณุชุฎุฏููู.csv')
    ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ = ุชุญููู_ุงูุจูุงูุงุช('ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ.csv', pd.DataFrame())
    
    ุนุฏุฏ_ุงูููุธููู = len(ุงููุณุชุฎุฏููู) if not ุงููุณุชุฎุฏููู.empty else 0
    ุทูุจุงุช_ูุนููุฉ = len(ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ[ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ['ุงูุญุงูุฉ'] == 'ููุฏ ุงููุฑุงุฌุนุฉ']) if not ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ.empty else 0
    ุทูุจุงุช_ูุนุชูุฏุฉ = len(ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ[ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ['ุงูุญุงูุฉ'] == 'ูุนุชูุฏ']) if not ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ.empty else 0
    
    with col1:
        st.metric("ุฅุฌูุงูู ุงูููุธููู", ุนุฏุฏ_ุงูููุธููู)
    with col2:
        st.metric("ุทูุจุงุช ููุฏ ุงููุฑุงุฌุนุฉ", ุทูุจุงุช_ูุนููุฉ)
    with col3:
        st.metric("ุทูุจุงุช ูุนุชูุฏุฉ", ุทูุจุงุช_ูุนุชูุฏุฉ)

def ุฅุฏุงุฑุฉ_ุงููุณุชุฎุฏููู():
    st.title("๐ฅ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู")
    
    ุงููุณุชุฎุฏููู = ุชุญููู_ุงูุจูุงูุงุช('ุงููุณุชุฎุฏููู.csv')
    
    if not ุงููุณุชุฎุฏููู.empty:
        st.subheader("ุงููุณุชุฎุฏููู ุงูุญุงูููู")
        st.dataframe(ุงููุณุชุฎุฏููู[['ุงุณู_ุงููุณุชุฎุฏู', 'ุงุณู_ุงูููุธู', 'ููุน_ุงููุณุชุฎุฏู', 'ุงููุณู', 'ุงูุญุงูุฉ']], use_container_width=True)
    
    # ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ
    st.subheader("ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ")
    with st.form("ุฅุถุงูุฉ_ูุณุชุฎุฏู"):
        col1, col2 = st.columns(2)
        
        with col1:
            ุงุณู_ุงููุณุชุฎุฏู = st.text_input("ุงุณู ุงููุณุชุฎุฏู")
            ูููุฉ_ุงููุฑูุฑ = st.text_input("ูููุฉ ุงููุฑูุฑ", type="password")
            ุงุณู_ุงูููุธู = st.text_input("ุงุณู ุงูููุธู")
        
        with col2:
            ููุน_ุงููุณุชุฎุฏู = st.selectbox("ููุน ุงููุณุชุฎุฏู", ["ููุธู", "ูุฏูุฑ", "ูุณุคูู_ุฅุฏุงุฑู", "ูุฏูุฑ_ุงููุธุงู"])
            ุงููุณู = st.text_input("ุงููุณู")
        
        if st.form_submit_button("ุฅุถุงูุฉ ูุณุชุฎุฏู"):
            if ุงุณู_ุงููุณุชุฎุฏู and ูููุฉ_ุงููุฑูุฑ and ุงุณู_ุงูููุธู:
                # ุฅุถุงูุฉ ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ
                ูุณุชุฎุฏู_ุฌุฏูุฏ = {
                    'ูุนุฑู': len(ุงููุณุชุฎุฏููู) + 1,
                    'ุงุณู_ุงููุณุชุฎุฏู': ุงุณู_ุงููุณุชุฎุฏู,
                    'ูููุฉ_ุงููุฑูุฑ': ุชุดููุฑ_ูููุฉ_ุงููุฑูุฑ(ูููุฉ_ุงููุฑูุฑ),
                    'ุงุณู_ุงูููุธู': ุงุณู_ุงูููุธู,
                    'ููุน_ุงููุณุชุฎุฏู': ููุน_ุงููุณุชุฎุฏู,
                    'ุงููุณู': ุงููุณู,
                    'ุงูุญุงูุฉ': 'ูุดุท',
                    'ุชุงุฑูุฎ_ุงูุฅูุดุงุก': datetime.now().strftime('%Y-%m-%d %H:%M:%S')
                }
                
                ุงููุณุชุฎุฏููู = pd.concat([ุงููุณุชุฎุฏููู, pd.DataFrame([ูุณุชุฎุฏู_ุฌุฏูุฏ])], ignore_index=True)
                ุญูุธ_ุงูุจูุงูุงุช('ุงููุณุชุฎุฏููู.csv', ุงููุณุชุฎุฏููู)
                
                # ุฅูุดุงุก ุฑุตูุฏ ูููุณุชุฎุฏู ุงูุฌุฏูุฏ
                ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช = ุชุญููู_ุงูุจูุงูุงุช('ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช.csv', pd.DataFrame())
                ุฑุตูุฏ_ุฌุฏูุฏ = {
                    'ูุนุฑู': len(ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช) + 1,
                    'ูุนุฑู_ุงูููุธู': ูุณุชุฎุฏู_ุฌุฏูุฏ['ูุนุฑู'],
                    'ุฑุตูุฏ_ุงูุณูุฉ_ุงูุญุงููุฉ': 30,
                    'ุฑุตูุฏ_ุงูุนุงู_ุงูุณุงุจู_1': 0,
                    'ุฑุตูุฏ_ุงูุนุงู_ุงูุณุงุจู_2': 0,
                    'ุงูุณูุฉ': 2024,
                    'ุชุงุฑูุฎ_ุงูุชุญุฏูุซ': datetime.now().strftime('%Y-%m-%d %H:%M:%S')
                }
                
                ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช = pd.concat([ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช, pd.DataFrame([ุฑุตูุฏ_ุฌุฏูุฏ])], ignore_index=True)
                ุญูุธ_ุงูุจูุงูุงุช('ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช.csv', ุฃุฑุตุฏุฉ_ุงูุฅุฌุงุฒุงุช)
                
                st.success("โ ุชู ุฅุถุงูุฉ ุงููุณุชุฎุฏู ุจูุฌุงุญ")
                st.rerun()
            else:
                st.error("โ ูุฑุฌู ููุก ุฌููุน ุงูุญููู ุงููุทููุจุฉ")

def ุงูุทูุจุงุช_ุงููุนููุฉ():
    st.title("๐ ุงูุทูุจุงุช ุงููุนููุฉ")
    
    ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ = ุชุญููู_ุงูุจูุงูุงุช('ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ.csv', pd.DataFrame())
    ุฃููุงุน_ุงูุฅุฌุงุฒุงุช = ุชุญููู_ุงูุจูุงูุงุช('ุฃููุงุน_ุงูุฅุฌุงุฒุงุช.csv')
    ุงููุณุชุฎุฏููู = ุชุญููู_ุงูุจูุงูุงุช('ุงููุณุชุฎุฏููู.csv')
    
    if not ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ.empty:
        ุทูุจุงุช_ูุนููุฉ = ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ[ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ['ุงูุญุงูุฉ'] == 'ููุฏ ุงููุฑุงุฌุนุฉ']
        
        if not ุทูุจุงุช_ูุนููุฉ.empty:
            for _, ุทูุจ in ุทูุจุงุช_ูุนููุฉ.iterrows():
                ููุน_ุงูุฅุฌุงุฒุฉ = ุฃููุงุน_ุงูุฅุฌุงุฒุงุช[ุฃููุงุน_ุงูุฅุฌุงุฒุงุช['ูุนุฑู'] == ุทูุจ['ููุน_ุงูุฅุฌุงุฒุฉ']]
                ุงุณู_ุงูุฅุฌุงุฒุฉ = ููุน_ุงูุฅุฌุงุฒุฉ.iloc[0]['ุงุณู_ุงูุฅุฌุงุฒุฉ'] if not ููุน_ุงูุฅุฌุงุฒุฉ.empty else "ุบูุฑ ูุนุฑูู"
                
                ุงูููุธู = ุงููุณุชุฎุฏููู[ุงููุณุชุฎุฏููู['ูุนุฑู'] == ุทูุจ['ูุนุฑู_ุงูููุธู']]
                ุงุณู_ุงูููุธู = ุงูููุธู.iloc[0]['ุงุณู_ุงูููุธู'] if not ุงูููุธู.empty else "ุบูุฑ ูุนุฑูู"
                
                with st.expander(f"{ุงุณู_ุงูููุธู} - {ุงุณู_ุงูุฅุฌุงุฒุฉ}"):
                    col1, col2 = st.columns(2)
                    col1.write(f"**ุงููุชุฑุฉ:** {ุทูุจ['ุชุงุฑูุฎ_ุงูุจุฏุก']} ุฅูู {ุทูุจ['ุชุงุฑูุฎ_ุงูุงูุชูุงุก']}")
                    col1.write(f"**ุนุฏุฏ ุงูุฃูุงู:** {ุทูุจ['ุนุฏุฏ_ุงูุฃูุงู']}")
                    col2.write(f"**ุงูุณุจุจ:** {ุทูุจ['ุงูุณุจุจ']}")
                    
                    # ุฎูุงุฑุงุช ุงูููุงููุฉ ุฃู ุงูุฑูุถ
                    col1, col2 = st.columns(2)
                    with col1:
                        if st.button(f"โ ุงูููุงููุฉ", key=f"approve_{ุทูุจ['ูุนุฑู']}"):
                            # ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ
                            ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ.loc[ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ['ูุนุฑู'] == ุทูุจ['ูุนุฑู'], 'ุงูุญุงูุฉ'] = 'ูุนุชูุฏ'
                            ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ.loc[ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ['ูุนุฑู'] == ุทูุจ['ูุนุฑู'], 'ูุนุฑู_ุงููุฏูุฑ_ุงูููุงูู'] = st.session_state.ูุนุฑู_ุงููุณุชุฎุฏู
                            ุญูุธ_ุงูุจูุงูุงุช('ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ.csv', ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ)
                            st.success("โ ุชูุช ุงูููุงููุฉ ุนูู ุงูุทูุจ")
                            st.rerun()
                    
                    with col2:
                        if st.button(f"โ ุงูุฑูุถ", key=f"reject_{ุทูุจ['ูุนุฑู']}"):
                            ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ.loc[ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ['ูุนุฑู'] == ุทูุจ['ูุนุฑู'], 'ุงูุญุงูุฉ'] = 'ูุฑููุถ'
                            ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ.loc[ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ['ูุนุฑู'] == ุทูุจ['ูุนุฑู'], 'ูุนุฑู_ุงููุฏูุฑ_ุงูููุงูู'] = st.session_state.ูุนุฑู_ุงููุณุชุฎุฏู
                            ุญูุธ_ุงูุจูุงูุงุช('ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ.csv', ุทูุจุงุช_ุงูุฅุฌุงุฒุฉ)
                            st.success("โ ุชู ุฑูุถ ุงูุทูุจ")
                            st.rerun()
        else:
            st.info("ูุง ุชูุฌุฏ ุทูุจุงุช ูุนููุฉ")
    else:
        st.info("ูุง ุชูุฌุฏ ุทูุจุงุช ุฅุฌุงุฒุฉ")

if __name__ == "__main__":
    main()
